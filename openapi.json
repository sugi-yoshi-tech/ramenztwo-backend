{"openapi":"3.1.0","info":{"title":"Press Release Analysis API","description":"データ型定義に基づき、プレスリリースをメディアフックの観点から分析し、改善点を提案する","version":"3.0.0"},"paths":{"/analyze":{"post":{"summary":"Analyze Press Release","description":"プレスリリースをメディアフックの観点から分析し、評価と改善点を構造化JSONで返すエンドポイント","operationId":"analyze_press_release_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PressReleaseInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PressReleaseAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"EvaluationScore":{"type":"integer","enum":[1,2,3,4,5],"title":"EvaluationScore","description":"5段階評価スコア"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ImageData":{"properties":{"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url","description":"画像URL"},"base64_data":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Base64 Data","description":"Base64エンコードされた画像データ"},"mime_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mime Type","description":"画像のMIMEタイプ (例: image/jpeg)"},"alt_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Alt Text","description":"画像の代替テキスト"}},"type":"object","title":"ImageData","description":"画像データ","example":{"alt_text":"プレスリリースのトップ画像","mime_type":"image/jpeg","url":"https://example.com/image.jpg"}},"ImprovementPriority":{"type":"string","enum":["low","medium","high","critical"],"title":"ImprovementPriority","description":"改善優先度"},"MediaHookEvaluation":{"properties":{"hook_type":{"$ref":"#/components/schemas/MediaHookType"},"hook_name_ja":{"type":"string","title":"Hook Name Ja","description":"メディアフック名（日本語）"},"score":{"$ref":"#/components/schemas/EvaluationScore"},"description":{"type":"string","title":"Description","description":"評価の説明"},"improve_examples":{"items":{"type":"string"},"type":"array","title":"Improve Examples","description":"改善例"},"current_elements":{"items":{"type":"string"},"type":"array","title":"Current Elements","description":"現在含まれている要素"}},"type":"object","required":["hook_type","hook_name_ja","score","description"],"title":"MediaHookEvaluation","description":"メディアフック評価"},"MediaHookType":{"type":"string","enum":["trending_seasonal","unexpectedness","paradox_conflict","regional","topicality","social_public","novelty_uniqueness","superlative_rarity","visual_impact"],"title":"MediaHookType","description":"メディアフックの種類"},"OverallAssessment":{"properties":{"total_score":{"type":"number","maximum":5.0,"minimum":0.0,"title":"Total Score","description":"総合スコア（0-5）"},"strengths":{"items":{"type":"string"},"type":"array","title":"Strengths","description":"強み"},"weaknesses":{"items":{"type":"string"},"type":"array","title":"Weaknesses","description":"改善が必要な点"},"top_recommendations":{"items":{"type":"string"},"type":"array","title":"Top Recommendations","description":"最優先の改善推奨事項"},"estimated_impact":{"type":"string","title":"Estimated Impact","description":"改善による期待される影響"}},"type":"object","required":["total_score","estimated_impact"],"title":"OverallAssessment","description":"全体評価サマリー"},"ParagraphImprovement":{"properties":{"paragraph_index":{"type":"integer","minimum":0.0,"title":"Paragraph Index","description":"段落のインデックス（0から開始）"},"original_text":{"type":"string","title":"Original Text","description":"元のテキスト"},"improved_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Improved Text","description":"改善後のテキスト案"},"improvements":{"items":{"type":"string"},"type":"array","title":"Improvements","description":"改善点のリスト"},"priority":{"$ref":"#/components/schemas/ImprovementPriority"},"applicable_hooks":{"items":{"$ref":"#/components/schemas/MediaHookType"},"type":"array","title":"Applicable Hooks","description":"この段落に適用可能なメディアフック"}},"type":"object","required":["paragraph_index","original_text","priority"],"title":"ParagraphImprovement","description":"段落ごとの改善提案"},"PressReleaseAnalysisResponse":{"properties":{"request_id":{"type":"string","title":"Request Id","description":"リクエストID（トラッキング用）"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"分析実行日時"},"media_hook_evaluations":{"items":{"$ref":"#/components/schemas/MediaHookEvaluation"},"type":"array","maxItems":9,"minItems":9,"title":"Media Hook Evaluations","description":"9つのメディアフックに対する評価"},"paragraph_improvements":{"items":{"$ref":"#/components/schemas/ParagraphImprovement"},"type":"array","title":"Paragraph Improvements","description":"段落ごとの改善提案"},"overall_assessment":{"$ref":"#/components/schemas/OverallAssessment"},"processing_time_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Processing Time Ms","description":"処理時間（ミリ秒）"},"ai_model_used":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ai Model Used","description":"使用したAIモデル"}},"type":"object","required":["request_id","media_hook_evaluations","paragraph_improvements","overall_assessment"],"title":"PressReleaseAnalysisResponse","description":"プレスリリース分析結果のレスポンス"},"PressReleaseInput":{"properties":{"title":{"type":"string","maxLength":200,"minLength":1,"title":"Title","description":"記事のタイトル"},"top_image":{"anyOf":[{"$ref":"#/components/schemas/ImageData"},{"type":"null"}],"description":"トップ画像"},"content_markdown":{"type":"string","minLength":1,"title":"Content Markdown","description":"プレスリリース本文（Markdown形式）"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"追加メタデータ (例: ターゲットペルソナ)"}},"type":"object","required":["title","content_markdown"],"title":"PressReleaseInput","description":"プレスリリース入力データ"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}